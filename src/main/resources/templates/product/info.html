<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      th:include="structure :: structure">
<boby>
    <div th:fragment="content">

    <div class="form-row mt-1">
        <div class="form-group mr-2">
            <form sec:authorize="hasAuthority('ADMIN')" method="get" th:action="@{/product/{id}/edit/(id=${product.id})}">
                <button type="submit" class="btn btn-primary ml-2">Изменить товар</button>
            </form>
        </div>

        <div class="form-group">
            <form sec:authorize="hasAuthority('ADMIN')" method="post" th:action="@{/product/{id}/delete/(id=${product.id})}">
                <button type="submit" class="btn btn-primary ml-2">Удалить товар</button>
            </form>
        </div>
    </div>

    <table class="table">
        <thead class="thead-light">
            <tr>
                <th>ID</th>
                <th>Название</th>
                <th>Описание</th>
                <th>Цена</th>
                <th>Производитель</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="product : ${product}">
                <td th:text="${product.id}"></td>
                <td th:text="${product.name}"></td>
                <td th:text="${product.description}"></td>
                <td th:text="${product.price}"></td>
                <td th:text="${product.producer} ? ${product.producer.name} : 'Не определен'"></td>
            </tr>
        </tbody>
    </table>
    </div>
</boby>
</html>