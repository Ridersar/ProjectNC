<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      th:include="structure :: structure">
<boby>
    <div th:fragment="content">
    <a sec:authorize="hasAuthority('ADMIN')" href="/product/add">Добавить товар</a>

    <div class="form-row mt-3">
        <div class="form-group col-md-6">
            <form method="post" th:action="@{/product/filter}" class="form-inline">
                <input type="text" name="filter" class="form-control" placeholder="Поиск по названию">
                <button type="submit" class="btn btn-primary ml-2">Найти</button>
            </form>
        </div>
    </div>

    <div class="form-row mt-1">
        <div class="form-group col-md-2">
            <form method="post" th:action="@{/product/sort/(value=id)}">
                <button type="submit" class="btn btn-primary ml-2">Сортировка по id</button>
            </form>
        </div>

        <div class="form-group col-md-2">
            <form method="post" th:action="@{/product/sort/(value=name)}">
                <button type="submit" class="btn btn-primary ml-2">Сортировка по названию</button>
            </form>
        </div>
    </div>

    <table class="table">
        <thead class="thead-light">
            <tr>
                <th>ID</th>
                <th>Название</th>
                <th>Описание</th>
                <th>Цена</th>
                <th>Производитель</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="product : ${products}">
                <td><a th:href="@{/product/{id}/(id=${product.id})}" th:text="${product.id}"/></td>
                <td th:text="${product.name}"></td>
                <td th:text="${product.description}"></td>
                <td th:text="${product.price} ? ${product.price} : '-'"></td>
                <td th:text="${product.producer} ? ${product.producer.name} : 'Не определен'"></td>
            </tr>
        </tbody>
    </table>
    </div>
</boby>
</html>